<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Create a package | Intro to package creation</title>
  <meta name="description" content="Create a package | Intro to package creation" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Create a package | Intro to package creation" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="d-rug/packages_with_roxygen2" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Create a package | Intro to package creation" />
  
  
  

<meta name="author" content="Liza Wood" />


<meta name="date" content="2022-10-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://d-rug.github.io/">
  <img src="https://github.com/d-rug/d-rug.github.io/raw/main/DRUG_final_cobalt.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Intro to package creation</a></li>

<li class="divider"></li>
<li><a href="index.html#overview" id="toc-overview">Overview<span></span></a></li>
<li><a href="create-a-package.html#create-a-package" id="toc-create-a-package">Create a package<span></span></a>
<ul>
<li><a href="create-a-package.html#setting-up" id="toc-setting-up"><span class="toc-section-number">0.0.1</span> Setting up<span></span></a></li>
<li><a href="create-a-package.html#writing-and-annotating-your-functions" id="toc-writing-and-annotating-your-functions"><span class="toc-section-number">0.0.2</span> Writing and annotating your function(s)<span></span></a></li>
<li><a href="create-a-package.html#making-your-package-available" id="toc-making-your-package-available"><span class="toc-section-number">0.0.3</span> Making your package available<span></span></a></li>
</ul></li>
<li class="divider"></li>
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
  <img alt="CC BY-SA 4.0" src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg" style="float: right; padding-right: 10px;" />
</a>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to package creation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="create-a-package" class="section level1 unnumbered hasAnchor">
<h1>Create a package<a href="create-a-package.html#create-a-package" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Note: This tutoial is derived from <a href="https://tinyheero.github.io/jekyll/update/2015/07/26/making-your-first-R-package.html">Fong Chun Chan’s Blog</a></p>
<div id="setting-up" class="section level3 hasAnchor" number="0.0.1">
<h3><span class="header-section-number">0.0.1</span> Setting up<a href="create-a-package.html#setting-up" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, make sure you have the two packages we’ll need to build a package:</p>
<pre><code>library(roxygen2)
library(devtools)</code></pre>
<p>In an empty project in RStudio, use devtools function to build you a package template, putting your package name in quotation marks:</p>
<pre><code>devtools::create(&quot;PatentPackage&quot;)</code></pre>
<p>This template includes a couple bits, the two we’ll focus on first are the <code>DESCRIPTION</code> page and the <code>R/</code> folder. In the <code>DESCRIPTION</code> folder there is a template for package information. Devtools makes it easy for you to just fill in the prompts. I’ve also added</p>
<pre><code>Package: PatentPackage
Title: Reads In US Patent Data
Version: 0.0.0.9000
Authors@R: 
    person(&quot;Liza&quot;, &quot;Wood&quot;, , &quot;belwood@ucdavis.edu&quot;, role = c(&quot;aut&quot;, &quot;cre&quot;))
Description: Here I will describe what this package does
License: `use_mit_license()`, `use_gpl3_license()` or friends to pick a
    license
Encoding: UTF-8
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.2.1
Imports: 
    lubridate
Depends: 
    R (&gt;= 2.10)</code></pre>
</div>
<div id="writing-and-annotating-your-functions" class="section level3 hasAnchor" number="0.0.2">
<h3><span class="header-section-number">0.0.2</span> Writing and annotating your function(s)<a href="create-a-package.html#writing-and-annotating-your-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Inside the <code>R/</code> folder is there the functions will go. Open up an R script and paste in your function. This is our function from last week:</p>
<pre><code>read_patents &lt;- function(file_dir){
  patents &lt;- do.call(&quot;rbind&quot;, 
                     lapply(list.files(file_dir, full.names = T),
                            function(x){
    df &lt;- read.csv(x)
    df$App_Date &lt;- ymd(as.character(df$App_Date))
    df$Issue_Date &lt;- ymd(as.character(df$Issue_Date))
    return(df)}))
  return(patents)
}</code></pre>
<p>We also need to add documentation so that we can have a help file for our function. We do this using roxygen2 notation by start lines with the <code>#'</code> symbols and adding in certain notation arguments, which starts with <code>@</code> signs. The basics are described in the <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html"><code>roxygen2</code> vigenette</a>. For instance:</p>
<pre><code>#&#39; Read US Patent Documentation
#&#39;
#&#39; Reads in csv files generates by the `patentr` package which downloans US patent
#&#39; records by the week, alters their date columns to date formats, then binds them
#&#39; into one data frame.
#&#39;
#&#39; @param file_dir Folder where USPTO csv files are stored, downloaded via `patentr` package
#&#39;
#&#39; @return A data frame of patents binded together
#&#39;
#&#39; @examples patents &lt;- read_patents(file_dir = &quot;patent_files/&quot;)
#&#39;
#&#39; @import lubridate
#&#39;
#&#39; @export</code></pre>
<p>Include the notation at the start of your script, above the function. Then save your R scripts as the name of your function inside the R folder. Make sure you are in your Rproject, then to update your function documentation, run:</p>
<pre><code>devtools::document()</code></pre>
<p>This generates a <code>man/</code> folder that stores the documenation.</p>
</div>
<div id="making-your-package-available" class="section level3 hasAnchor" number="0.0.3">
<h3><span class="header-section-number">0.0.3</span> Making your package available<a href="create-a-package.html#making-your-package-available" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now we want to link your package to a GitHub repository. In GitHub, create a new repository with your package name, with no other templates. It should then appear as below.</p>
<p><img src="img/new_proj.png" /></p>
<p>Then inside your empty RStudio space that you have been building the package, link the local project to the GitHub repository using the following lines in the Terminal, replacing the GitHub repo directory with the link to your directory.</p>
<pre><code>git init
git add .
git commit -m &quot;Setting up package to GitHub&quot;
git remote add origin https://github.com/liza-wood/PatentPackage
git push -u -f origin master</code></pre>
<p>Now this package lives on GitHub: <a href="https://github.com/liza-wood/PatentPackage" class="uri">https://github.com/liza-wood/PatentPackage</a>. Which also means we can all use it now by installing it from GitHub:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="create-a-package.html#cb8-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;liza-wood/PatentPackage&quot;</span>)</span></code></pre></div>
<pre><code>## Skipping install of &#39;PatentPackage&#39; from a github remote, the SHA1 (1475555a) has not changed since last install.
##   Use `force = TRUE` to force installation</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="create-a-package.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PatentPackage)</span>
<span id="cb10-2"><a href="create-a-package.html#cb10-2" aria-hidden="true" tabindex="-1"></a>?<span class="fu">read_patents</span>()</span></code></pre></div>
<p>And you can download the data stored in this workshop repository, the patents for 52 weeks from 1977, to trial the function. First download the data here:</p>
<p>Then give it a try once you’ve installed the package:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="create-a-package.html#cb11-1" aria-hidden="true" tabindex="-1"></a>patents <span class="ot">&lt;-</span> <span class="fu">read_patents</span>(<span class="st">&quot;data/&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: 1 failed to parse.</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="create-a-package.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patents)</span></code></pre></div>
<pre><code>##         WKU                          Title   App_Date Issue_Date
## 1 D02428814                 Diver s helmet 1975-09-08 1977-01-04
## 2 D02428822 Combined brush and ice scraper 1976-04-21 1977-01-04
## 3 D02428830                     Toothbrush 1975-09-17 1977-01-04
## 4 D02428849        Stand for potted plants 1976-01-07 1977-01-04
## 5 D02428857                          Chair 1975-08-18 1977-01-04
## 6 D02428865        Seat or similar article 1975-06-02 1977-01-04
##                 Inventor                        Assignee   ICL_Class
## 1       Richard F. Jones          General Aquadyne, Inc.       D0203
## 2      Otto W. Schneider            Erwin Weller Company D0401;D0705
## 3     Thomas J. De Marco                                 D0402;D2402
## 4             Peter Diaz Lawrence Peska Associates, Inc.       D0604
## 5 Lee Harold Fister, Jr.                                       D0601
## 6       Taylor M. Potter                                       D0601
##                                       References
## 1                                3845768;3943571
## 2        D184943;D228585;2856621;2981964;3017649
## 3                 D56858;1209789;2677843;3677264
## 4                        D137106;D165328;1406893
## 5                                               
## 6 D49656;D219583;D227834;D234171;D237923;3563599
##                                                                                                          Claims
## 1                                                         The ornamental design for a diver s helmet, as shown.
## 2 The ornamental design for a combined brush and ice scraper, or the like,substantially as shown and described.
## 3                                  The ornamental design for a toothbrush, substantially as shown anddescribed.
## 4                                   The ornamental design for a stand for potted plants, substantially asshown.
## 5                                                                  The ornamental design for a chair, as shown.
## 6                                                The ornamental design for a seat or similar article, as shown.</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/d-rug/packages_with_roxygen2/edit/master/01_create_a_package.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/d-rug/packages_with_roxygen2/blob/master/01_create_a_package.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
